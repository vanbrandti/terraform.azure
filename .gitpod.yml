tasks:
  - name: install_azure_cli
    before: echo "Install Azure CLI"
    command: |
      curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

  - name: install_terraform
    before: echo "Install Terraform"
    command: |
      sudo apt-get update && sudo apt-get install -y gnupg software-properties-common

      wget -O- https://apt.releases.hashicorp.com/gpg | \
      gpg --dearmor | \
      sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg

      gpg --no-default-keyring \
      --keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg \
      --fingerprint

      echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
      https://apt.releases.hashicorp.com $(lsb_release -cs) main" | \
      sudo tee /etc/apt/sources.list.d/hashicorp.list

      sudo apt update

      sudo apt-get install terraform

  - name: verify_terraform_install
    before: echo "Verify TF install"
    command: |
      terraform -help
      terraform -help plan



      
# vscode:
#   extensions:
#     - hashicorp.terraform
#     - ms-azuretools.vscode-azureresourcegroups
#     - formulahendry.code-runner